(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports={"no-scroll":"styles_no-scroll__1vsU8",root:"styles_root__3QAxj",timeline:"styles_timeline__106Mk",debug:"styles_debug__2SKKM","debug-active":"styles_debug-active___9OUc",calendar:"styles_calendar__3Xx2Y","react-draggable":"styles_react-draggable__2QRVw","handle-wrapper":"styles_handle-wrapper__2T7f7",handle:"styles_handle__1dKGL",top:"styles_top__2FFal",bottom:"styles_bottom__3nd0X","layer-container":"styles_layer-container__1Quoi",event:"styles_event__bjik1","drag-box":"styles_drag-box__OvX9t",draggable:"styles_draggable__a1ktL","button-reset":"styles_button-reset__3_zQt","is-draggable":"styles_is-draggable__2U2x2","react-draggable-dragging":"styles_react-draggable-dragging__1T3s8","is-pending-creation":"styles_is-pending-creation__2vDDI","hours-container":"styles_hours-container__3XZzL","day-column":"styles_day-column__2sQzS","day-hours":"styles_day-hours__3_7p4",cell:"styles_cell__1OJUD",time:"styles_time__1X-Hn",title:"styles_title__2dKTz","is-hour-start":"styles_is-hour-start__1Doa3",header:"styles_header__1IF59",first:"styles_first__1t63n",popup:"styles_popup__2oSt1","range-boxes":"styles_range-boxes__39XBE","event-content":"styles_event-content__1EBie",start:"styles_start__2DXVx",end:"styles_end__2XnIt"}},114:function(e,t,a){e.exports=a(226)},226:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(66),l=a.n(s),i=(a(103),a(13)),o=a(25),u=a(7),d=a(104),b=a(105),m=a.n(b),f=a(8),g=a(38),h=a.n(g),p=a(5),O=a(113),j=a(106),v=a(230),_=a(52),y=a(233),Y=a(229),E=a(112),D=a(235),X=a(231),w=a(232),x=a(41),M=a(236),C=a(234),R=function(e){return function(t){var a,n,r,c;if("changedTouches"in t){var s=t.changedTouches[0];a=s.clientX,n=s.clientY,r=s.pageX,c=s.pageY}else a=t.clientX,n=t.clientY,r=t.pageX,c=t.pageY;var l=e.getBoundingClientRect(),i=l.top,o=l.left;return{clientX:a,clientY:n,pageX:r,pageY:c,top:i,left:o,x:a-o,y:n-i}}},T=Object(Y.a)(function(e){e.preventDefault(),e.stopPropagation()});var N=a(107),k=a.n(N),H=new WeakMap;function I(e,t,a){var n=Object(r.useRef)(null);n.current=t,Object(r.useEffect)(function(){if(a){var t=H.get(a);return t||(t=new Mousetrap(a),H.set(a,t)),t.bind(e,function(){"function"===typeof n.current&&n.current()}),function(){k.a.unbind(e)}}},[e,a])}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.passive,n=void 0===a||a,c=t.enabled,s=void 0===c||c,l=Object(r.useState)({scrollTop:0,scrollLeft:0}),i=Object(u.a)(l,2),o=i[0],d=i[1];return function(e,t,a,n){var c=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).enabled,s=void 0===c||c;Object(r.useEffect)(function(){if(null!==e.current)return s?e.current.addEventListener(t,a,n):a&&e.current.removeEventListener(t,a),function(){e.current&&e.current.removeEventListener(t,a)}},[e.current,a,n,s])}(e,"scroll",function(e){if(e&&e.target){var t=e.target,a=t.scrollTop,n=t.scrollLeft;d({scrollTop:a,scrollLeft:n})}},{passive:n},{enabled:s}),o}function z(e,t){var a=t.top,n=void 0!==a&&a,c=t.left,s=void 0!==c&&c,l=W(e,{enabled:n||s}),i=l.scrollLeft,o=l.scrollTop;return Object(r.useMemo)(function(){return{transform:"translate(".concat(s?i:0,"px, ").concat(n?o:0,"px)"),zIndex:3}},[s?i:0,n?o:0])}var S=function(e,t){return 1+Math.abs(t-e)},F=function(e){var t=e.startX,a=e.startY,r=e.toMin,c=e.originDate;return Object(n.addMinutes)(Object(n.addDays)(c,t),r(a))},Z=a(108),L=a.n(Z);function V(e){return L()(Object(o.a)(e).map(function(e){return e.map(function(e){return new Date(e)})}))}function B(e,t){return null===t?e:V([].concat(Object(o.a)(e),Object(o.a)(t))).sort(function(e,t){return Object(n.compareAsc)(e[0],t[0])})}var P=c.a.memo(function(e){var t=e.timeIndex,a=e.children,r=e.classes,s=(0,e.getDateRangeForVisualGrid)({startX:0,startY:t,endX:0,endY:t+1,spanX:1,spanY:1}),l=Object(u.a)(s,1),o=Object(u.a)(l[0],1)[0],d=0===Object(n.getMinutes)(o);return c.a.createElement("div",{className:Object(f.a)([r.cell,Object(i.a)({},r["is-hour-start"],d)])},a&&a({start:o,isHourStart:d}))}),A=a(18),G=a(109),Q=a(110),U=a.n(Q),K=c.a.memo(function(e){var t,a=e.classes,s=e.grid,l=e.isBeingEdited,o=e.rangeIndex,d=e.cellIndex,b=e.cellArray,m=e.cell,g=e.className,p=e.onChange,O=e.cellInfoToDateRange,j=e.isResizable,v=e.isDeletable,_=e.isMovable,y=Object(r.useRef)(null),Y=Object(r.useState)(m),E=Object(u.a)(Y,2),D=E[0],X=E[1],w=Object(r.useMemo)(function(){return s.getRectFromCell(m)},[m,s]),x=Object(r.useMemo)(function(){return s.getRectFromCell(D)},[D,s]);Object(r.useEffect)(function(){X(m)},[m]);var M=Object(r.useMemo)(function(){return O(D)},[D]);I("del",Object(r.useCallback)(function(){v&&p&&p(void 0,o)},[y.current,p,v,o]),y.current);var C=x.top,R=x.left,T=x.width,N=x.height,k=0===d,H=d===b.length-1,W=Object(r.useCallback)(function(){p&&p(O(D),o)},[D,o,O,p]);I("up",function(){if(_&&0!==D.startY){var e=Object(A.a)({},D,{startY:D.startY-1,endY:D.endY-1});p&&p(O(e),o)}},y.current),I("down",function(){if(_&&D.endY!==s.numVerticalCells-1){var e=Object(A.a)({},D,{startY:D.startY+1,endY:D.endY+1});p&&p(O(e),o)}},y.current);var z=Object(r.useCallback)(function(e,t){var a=t.y;if(_){e.preventDefault(),e.stopPropagation();var n=a,r=n+x.height,c=Math.min(n,r),l=c+x.height;if(c!==C){var i=Object(A.a)({},x,{top:c,bottom:l}),o=s.getCellFromRect(i),u=o.startY,d=o.endY,b=Object(A.a)({},m,{startY:u,endY:d});h()(b.spanY===m.spanY,"Expected the dragged time cell to have the same height (".concat(b.spanY,", ").concat(m.spanY,")")),X(b)}}},[s,x,_,X]),S=Object(r.useCallback)(function(e,t,a,n){if(j&&(e.preventDefault(),e.stopPropagation(),0!==n.height)){var r={height:n.height+x.height,width:n.width+x.width+20},c=Object(A.a)({},w,r);t.includes("top")?c.top-=n.height:t.includes("bottom")&&(c.bottom+=n.height);var l=s.getCellFromRect(c),i=l.spanY,o=l.startY,u=l.endY,d=Object(A.a)({},m,{spanY:i,startY:o,endY:u});X(d)}},[s,x,j,X,w]);return c.a.createElement(U.a,{axis:_?"y":"none",bounds:{top:0,bottom:s.totalHeight-N,left:0,right:s.totalWidth},position:{x:R,y:C},onDrag:z,onStop:W,cancel:".".concat(a.handle)},c.a.createElement("button",{className:Object(f.a)([a.event,a["button-reset"],a["range-box"],g,(t={},Object(i.a)(t,a["is-draggable"],_),Object(i.a)(t,a["is-being-edited"],l&&l(m)),t)]),ref:y,tabIndex:0,style:{width:T-20,height:N}},c.a.createElement(G.a,{size:Object(A.a)({},w,{width:w.width-20}),onResize:S,onResizeStop:W,handleWrapperClass:a["handle-wrapper"],enable:j?{top:!0,bottom:!0}:{},handleClasses:{bottom:Object(f.a)([a.handle,a.bottom]),bottomLeft:Object(f.a)([a.handle,a["bottom-left"]]),bottomRight:Object(f.a)([a.handle,a["bottom-right"]]),left:Object(f.a)([a.handle,a.left]),right:Object(f.a)([a.handle,a.right]),top:Object(f.a)([a.handle,a.top]),topLeft:Object(f.a)([a.handle,a["top-left"]]),topRight:Object(f.a)([a.handle,a["top-right"]])}},c.a.createElement("div",{className:a["event-content"]},c.a.createElement("span",{className:a.start},k&&Object(n.format)(M[0],"h:mma")),c.a.createElement("span",{className:a.end},H&&Object(n.format)(M[1],"h:mma"))))))}),q=c.a.memo(function(e){var t=e.classes,a=e.ranges,n=e.grid,r=e.className,s=e.onChange,l=e.isResizable,i=e.isDeletable,o=e.isMovable,u=e.cellInfoToDateRange,d=e.dateRangeToCells,b=e.isBeingEdited;return c.a.createElement("div",{className:t["range-boxes"]},a.map(function(e,a){return c.a.createElement("span",{key:a},d(e).map(function(e,d,m){return c.a.createElement(K,{classes:t,key:d,isResizable:l,isMovable:o,isDeletable:i,cellInfoToDateRange:u,cellArray:m,cellIndex:d,rangeIndex:a,className:r,isBeingEdited:b,onChange:s,grid:n,cell:e})}))}))}),J=function(e){return 1*e},$=function(e){return e/1},ee=c.a.memo(function(e){var t=e.verticalPrecision,a=void 0===t?30:t,s=e.visualGridVerticalPrecision,l=void 0===s?30:s,b=e.schedule,g=e.originDate,N=void 0===g?new Date:g,k=e.classes,H=1440/a,W=Object(r.useCallback)(function(e){return e*a},[a]),Z=function(e){return e/a},L=Object(r.useMemo)(function(){return function(e){var t=e.fromY,a=e.fromX,r=e.originDate;return function(e){var c=e.startX,s=e.startY,l=e.endX,i=e.spanY;return Object(p.range)(c,l+1).map(function(e){var c=F({startX:e,startY:s,toMin:t,toDay:a,originDate:r}),l=Object(n.addMinutes)(c,t(i));return Object(n.isEqual)(l,Object(n.startOfDay)(l))&&(l=Object(n.endOfDay)(Object(n.subDays)(l,1))),Object(n.isBefore)(c,l)?[c,l]:[l,c]}).sort(function(e,t){return Object(n.isBefore)(e[0],t[0])?0:1})}}({originDate:N,fromY:W,fromX:J})},[W,J,N]),A=Object(r.useCallback)(function(e){var t=L(e),a=Object(d.a)(t),n=a[0],r=a.slice(1);return h()(0===r.length,'Expected "cellInfoToSingleDateRange" to return a single date range, found '.concat(r.length," additional ranges instead. This is a bug in @remotelock/weekly-scheduler")),n},[L]),G=Object(r.useMemo)(function(){return function(e){var t=e.toX,a=void 0===t?function(e){return e}:t,r=e.toY,c=e.numVerticalCells,s=e.originDate;return function(e){var t=Object(u.a)(e,2),l=t[0],i=t[1],o=Object(n.startOfDay)(l),d=a(Object(n.differenceInDays)(l,s)),b=r(Object(n.differenceInMinutes)(l,o)),m=a(Object(n.differenceInDays)(i,s)),f=r(Object(n.differenceInMinutes)(i,Object(n.startOfDay)(i)))-1,g=Object(p.range)(d,m+1).map(function(e){var t=e===d?b:0,a=e===m?f:c-1;return{startX:e,startY:t,endX:e,endY:a,spanX:S(e,e),spanY:S(t,a)}});return Object(n.isEqual)(i,Object(n.startOfDay)(i))&&g.pop(),g}}({originDate:N,numVerticalCells:H,numHorizontalCells:7,toX:$,toY:Z})},[Z,$,H,7,N]),Q=Object(r.useRef)(null),U=Object(r.useRef)(null),K=z(Q,{top:!1,left:!0}),ee=z(Q,{top:!1,left:!1}),te=m()(U),ae=function(e){var t=Object(r.useState)({transform:"translate(0, 0)",width:0,height:0}),a=Object(u.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(null),l=Object(u.a)(s,2),i=l[0],o=l[1],d=Object(r.useState)(!1),b=Object(u.a)(d,2),m=b[0],f=b[1],g=Object(r.useState)(!1),h=Object(u.a)(g,2),O=h[0],j=h[1];return Object(r.useEffect)(function(){var t=e.current;if(t){var a=R(t),n=Object(v.a)(window,"touchmove",{passive:!1}).pipe(T),r=Object(v.a)(window,"touchend",{passive:!0}),s=Object(v.a)(t,"touchstart",{passive:!1}).pipe(Object(E.a)(function(e){return Object(_.a)(e).pipe(Object(D.a)(300),Object(X.a)(n),T)})),l=Object(v.a)(t,"mousedown",{passive:!0}).pipe(Object(w.a)(function(e){return 1===e.which})),i=Object(v.a)(window,"mousemove",{passive:!0}),u=Object(v.a)(window,"mouseup",{passive:!0}),d=Object(y.a)(l,s).pipe(Object(x.a)(a)),b=Object(y.a)(u,r).pipe(Object(x.a)(a),Object(Y.a)(function(){f(!1),j(!0)})),m=Object(y.a)(i,n).pipe(Object(x.a)(a)),g=d.pipe(Object(Y.a)(function(){f(!0),j(!1)}),Object(E.a)(function(e){return m.pipe(Object(M.a)(e),Object(x.a)(function(a){var n=Math.max(e.x,0),r=Math.max(e.y,0),c=Math.min(a.x,t.scrollWidth),s=Math.min(a.y,t.scrollHeight),l=Math.min(r,s),i=Math.max(r,s),o=Math.min(n,c),u=Math.max(n,c);return{startX:n,startY:r,endX:c,endY:s,top:l,bottom:i,left:o,right:u,width:u-o,height:i-l}}),Object(X.a)(b))}),Object(C.a)(p.isEqual)),h=g.pipe(Object(x.a)(function(e){var t=e.top,a=e.left,n=e.width,r=e.height;return{transform:"translate(".concat(a,"px, ").concat(t,"px)"),width:n,height:r}})),O=g.subscribe(o),N=h.subscribe(c);return function(){O.unsubscribe(),N.unsubscribe()}}},[e.current]),{style:n,box:i,isDragging:m,cancel:Object(r.useCallback)(function(){f(!1),j(!1),o(null)},[o]),hasFinishedDragging:O}}(U),ne=ae.style,re=ae.box,ce=ae.isDragging,se=ae.hasFinishedDragging,le=ae.cancel,ie=Object(r.useState)(null),oe=Object(u.a)(ie,2),ue=oe[0],de=oe[1],be=Object(j.a)(b),me=Object(u.a)(be,2),fe=me[0],ge=me[1],he=ge.set,pe=ge.undo,Oe=ge.redo,je=ge.canUndo,ve=ge.canRedo,_e=Object(r.useMemo)(function(){var e=null,t=null;if(null!==U.current){var a=U.current;e=a.scrollHeight,t=a.scrollWidth}return{totalHeight:e,totalWidth:t}},[U.current,te]),ye=_e.totalHeight,Ye=_e.totalWidth,Ee=Object(r.useMemo)(function(){return null===ye||null===Ye?null:function(e){var t=e.totalHeight,a=e.totalWidth,n=e.numVerticalCells,r=e.numHorizontalCells,c=Object(p.floor)(t/n),s=Object(p.floor)(a/r);return{totalHeight:t,totalWidth:a,numVerticalCells:n,numHorizontalCells:r,cellWidth:s,cellHeight:c,getRectFromCell:function(e){var t=e.endX,a=e.startX,n=e.endY,r=e.startY,c=e.spanX,s=e.spanY;return{bottom:n*this.cellHeight,top:r*this.cellHeight,left:a*this.cellWidth,right:t*this.cellWidth,height:s*this.cellHeight,width:c*this.cellWidth,startX:a*this.cellWidth,endX:t*this.cellWidth,startY:r*this.cellHeight,endY:n*this.cellHeight}},getCellFromRect:function(e){var t=Object(p.clamp)(Object(p.floor)(e.left/this.cellWidth),0,r-1),a=Object(p.clamp)(Object(p.round)(e.top/this.cellHeight),0,n-1),c=Object(p.clamp)(Object(p.floor)(e.right/this.cellWidth),0,r-1),s=Object(p.clamp)(Object(p.round)(e.bottom/this.cellHeight),0,n-1);return{spanX:Object(p.clamp)(S(t,c),1,r),spanY:Object(p.clamp)(S(a,s),1,n),startX:t,startY:a,endX:c,endY:s}}}}({totalHeight:ye,totalWidth:Ye,numHorizontalCells:7,numVerticalCells:H})},[ye,Ye,7,H]);Object(r.useEffect)(function(){if(null!==Ee&&null!==re){var e=re,t=Ee.getCellFromRect(e),a=L(t);de(a)}else de(null)},[re,Ee,de]),Object(r.useEffect)(function(){se&&(he(B(fe.present,ue)),de(null))},[se,he,de,ue,fe.present]),I("ctrl+z",function(){je&&pe()},document),I("ctrl+shift+z",function(){ve&&Oe()},document),I("esc",function(){ue&&le()},document),Object(r.useEffect)(function(){le()},[te]);var De=Object(r.useCallback)(function(e,t){if(!fe.present&&e)return[e];var a=Object(o.a)(fe.present);e?a[t]=e:a.splice(t,1),he(V(a))},[fe.present]),Xe=Object(r.useMemo)(function(){return function(e){var t=e.fromY,a=e.fromX,r=e.originDate;return function(e){var c=e.startX,s=e.startY,l=e.endX,i=e.endY,o=F({startX:c,startY:s,toMin:t,toDay:a,originDate:r}),u=F({startX:l,startY:i,toMin:t,toDay:a,originDate:r});return[Object(n.isBefore)(o,u)?[o,u]:[u,o]]}}({originDate:N,fromX:J,fromY:function(e){return e*l}})},[l,J,N]);Object(r.useEffect)(function(){Q.current&&Q.current.contains(document.activeElement)&&document.activeElement&&Object(O.a)(document.activeElement,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})},[Q.current,document.activeElement,fe.present]);var we=1440/l;return c.a.createElement("div",{ref:Q,className:Object(f.a)([k.root,Object(i.a)({},k["no-scroll"],ce)])},c.a.createElement("div",{style:K,className:k.timeline},c.a.createElement("div",{className:k.header},c.a.createElement("div",{className:k["day-column"]},c.a.createElement("div",{className:Object(f.a)([k.cell,k.title])},"T"))),c.a.createElement("div",{className:k.calendar},c.a.createElement("div",{className:k["day-column"]},c.a.createElement("div",{className:k["day-hours"]},Object(p.times)(we).map(function(e){return c.a.createElement(P,{classes:k,getDateRangeForVisualGrid:Xe,key:e,timeIndex:e},function(e){var t=e.start;return e.isHourStart?c.a.createElement("div",{className:k.time},Object(n.format)(t,"h a")):null})}))))),c.a.createElement("div",null,c.a.createElement("div",{style:ee,className:Object(f.a)([k.calendar,k.header])},Object(p.times)(7).map(function(e){return c.a.createElement("div",{key:e,className:k["day-column"]},c.a.createElement("div",{className:Object(f.a)([k.cell,k.title])},Object(n.format)(Object(n.addDays)(N,e),"ddd")))})),c.a.createElement("div",{className:k["layer-container"]},ce&&c.a.createElement("div",{className:k["drag-box"],style:ne},se&&c.a.createElement("div",{className:k.popup})),Ee&&ue&&ce&&c.a.createElement(q,{classes:k,dateRangeToCells:G,cellInfoToDateRange:A,className:k["is-pending-creation"],ranges:B(fe.present,ue),grid:Ee}),Ee&&!ue&&c.a.createElement(q,{classes:k,dateRangeToCells:G,cellInfoToDateRange:A,isResizable:!0,isMovable:!0,isDeletable:!0,onChange:De,ranges:fe.present,grid:Ee}),c.a.createElement("div",{ref:U,className:k.calendar},Object(p.times)(7).map(function(e){return c.a.createElement("div",{key:e,className:k["day-column"]},c.a.createElement("div",{className:k["day-hours"]},Object(p.times)(we).map(function(e){return c.a.createElement(P,{classes:k,getDateRangeForVisualGrid:Xe,key:e,timeIndex:e})})))})))))}),te=a(111),ae=a.n(te),ne=[["2019-03-03T22:45:00.000Z","2019-03-04T01:15:00.000Z"],["2019-03-05T22:00:00.000Z","2019-03-06T01:00:00.000Z"],["2019-03-04T22:15:00.000Z","2019-03-05T01:00:00.000Z"],["2019-03-07T05:30:00.000Z","2019-03-07T10:00:00.000Z"],["2019-03-08T22:00:00.000Z","2019-03-09T01:00:00.000Z"],["2019-03-09T22:00:00.000Z","2019-03-10T01:00:00.000Z"],["2019-03-06T22:00:00.000Z","2019-03-07T01:00:00.000Z"]].map(function(e){return e.map(function(e){return new Date(e)})}).sort(function(e,t){return Object(n.compareAsc)(e[0],t[0])}),re=document.getElementById("root");l.a.render(c.a.createElement(ee,{classes:ae.a,originDate:Object(n.startOfWeek)(new Date("2019-03-04"),{weekStartsOn:1}),schedule:ne,verticalPrecision:15}),re)}},[[114,1,2]]]);
//# sourceMappingURL=main.44b51439.chunk.js.map