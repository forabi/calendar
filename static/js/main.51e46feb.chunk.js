(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports={"no-scroll":"styles_no-scroll__1vsU8",root:"styles_root__3QAxj",timeline:"styles_timeline__106Mk",debug:"styles_debug__2SKKM","debug-active":"styles_debug-active___9OUc",calendar:"styles_calendar__3Xx2Y","react-draggable":"styles_react-draggable__2QRVw","handle-wrapper":"styles_handle-wrapper__2T7f7",handle:"styles_handle__1dKGL",top:"styles_top__2FFal",bottom:"styles_bottom__3nd0X","layer-container":"styles_layer-container__1Quoi",event:"styles_event__bjik1","drag-box":"styles_drag-box__OvX9t",draggable:"styles_draggable__a1ktL","button-reset":"styles_button-reset__3_zQt","is-draggable":"styles_is-draggable__2U2x2","react-draggable-dragging":"styles_react-draggable-dragging__1T3s8","is-pending-creation":"styles_is-pending-creation__2vDDI","hours-container":"styles_hours-container__3XZzL","day-column":"styles_day-column__2sQzS","day-hours":"styles_day-hours__3_7p4",cell:"styles_cell__1OJUD",time:"styles_time__1X-Hn",title:"styles_title__2dKTz",header:"styles_header__1IF59",first:"styles_first__1t63n",popup:"styles_popup__2oSt1","range-boxes":"styles_range-boxes__39XBE","event-content":"styles_event-content__1EBie",start:"styles_start__2DXVx",end:"styles_end__2XnIt"}},114:function(e,t,n){e.exports=n(226)},226:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),l=n(66),s=n.n(l),i=(n(103),n(21)),o=n(25),u=n(7),d=n(104),b=n(105),f=n.n(b),m=n(8),g=n(38),h=n.n(g),p=n(5),O=n(113),j=n(106),v=n(17),_=n(107),y=n(108),Y=n.n(y),E=n(109),D=n.n(E),X=new WeakMap;function w(e,t,n){var a=Object(c.useRef)(null);a.current=t,Object(c.useEffect)(function(){if(n){var t=X.get(n);return t||(t=new Mousetrap(n),X.set(n,t)),t.bind(e,function(){"function"===typeof a.current&&a.current()}),function(){D.a.unbind(e)}}},[e,n])}var x=r.a.memo(function(e){var t,n=e.classes,l=e.grid,s=e.isBeingEdited,o=e.rangeIndex,d=e.cellIndex,b=e.cellArray,f=e.cell,g=e.className,p=e.onChange,O=e.cellInfoToDateRange,j=e.isResizable,y=e.isDeletable,E=e.isMovable,D=Object(c.useRef)(null),X=Object(c.useState)(f),x=Object(u.a)(X,2),M=x[0],C=x[1],T=Object(c.useMemo)(function(){return l.getRectFromCell(f)},[f,l]),R=Object(c.useMemo)(function(){return l.getRectFromCell(M)},[M,l]);Object(c.useEffect)(function(){C(f)},[f]);var N=Object(c.useMemo)(function(){return O(M)},[M]);w("del",Object(c.useCallback)(function(){y&&p&&p(void 0,o)},[D.current,p,y,o]),D.current);var k=R.top,H=R.left,I=R.width,W=R.height,z=0===d,Z=d===b.length-1,S=Object(c.useCallback)(function(){p&&p(O(M),o)},[M,o,O,p]);w("up",function(){if(E&&0!==M.startY){var e=Object(v.a)({},M,{startY:M.startY-1,endY:M.endY-1});p&&p(O(e),o)}},D.current),w("down",function(){if(E&&M.endY!==l.numVerticalCells-1){var e=Object(v.a)({},M,{startY:M.startY+1,endY:M.endY+1});p&&p(O(e),o)}},D.current);var F=Object(c.useCallback)(function(e,t){var n=t.y;if(E){e.preventDefault(),e.stopPropagation();var a=n,c=a+R.height,r=Math.min(a,c),s=r+R.height;if(r!==k){var i=Object(v.a)({},R,{top:r,bottom:s}),o=l.getCellFromRect(i),u=o.startY,d=o.endY,b=Object(v.a)({},f,{startY:u,endY:d});h()(b.spanY===f.spanY,"Expected the dragged time cell to have the same height (".concat(b.spanY,", ").concat(f.spanY,")")),C(b)}}},[l,R,E,C]),L=Object(c.useCallback)(function(e,t,n,a){if(j&&(e.preventDefault(),e.stopPropagation(),0!==a.height)){var c={height:a.height+R.height,width:a.width+R.width+20},r=Object(v.a)({},T,c);t.includes("top")?r.top-=a.height:t.includes("bottom")&&(r.bottom+=a.height);var s=l.getCellFromRect(r),i=s.spanY,o=s.startY,u=s.endY,d=Object(v.a)({},f,{spanY:i,startY:o,endY:u});C(d)}},[l,R,j,C,T]);return r.a.createElement(Y.a,{axis:E?"y":"none",bounds:{top:0,bottom:l.totalHeight-W,left:0,right:l.totalWidth},position:{x:H,y:k},onDrag:F,onStop:S,cancel:".".concat(n.handle)},r.a.createElement("button",{className:Object(m.a)([n.event,n["button-reset"],n["range-box"],g,(t={},Object(i.a)(t,n["is-draggable"],E),Object(i.a)(t,n["is-being-edited"],s&&s(f)),t)]),ref:D,tabIndex:0,style:{width:I-20,height:W}},r.a.createElement(_.a,{size:Object(v.a)({},T,{width:T.width-20}),onResize:L,onResizeStop:S,handleWrapperClass:n["handle-wrapper"],enable:j?{top:!0,bottom:!0}:{},handleClasses:{bottom:Object(m.a)([n.handle,n.bottom]),bottomLeft:Object(m.a)([n.handle,n["bottom-left"]]),bottomRight:Object(m.a)([n.handle,n["bottom-right"]]),left:Object(m.a)([n.handle,n.left]),right:Object(m.a)([n.handle,n.right]),top:Object(m.a)([n.handle,n.top]),topLeft:Object(m.a)([n.handle,n["top-left"]]),topRight:Object(m.a)([n.handle,n["top-right"]])}},r.a.createElement("div",{className:n["event-content"]},r.a.createElement("span",{className:n.start},z&&Object(a.format)(N[0],"h:mma")),r.a.createElement("span",{className:n.end},Z&&Object(a.format)(N[1],"h:mma"))))))}),M=r.a.memo(function(e){var t=e.classes,n=e.ranges,a=e.grid,c=e.className,l=e.onChange,s=e.isResizable,i=e.isDeletable,o=e.isMovable,u=e.cellInfoToDateRange,d=e.dateRangeToCells,b=e.isBeingEdited;return r.a.createElement("div",{className:t["range-boxes"]},n.map(function(e,n){return r.a.createElement("span",{key:n},d(e).map(function(e,d,f){return r.a.createElement(x,{classes:t,key:d,isResizable:s,isMovable:o,isDeletable:i,cellInfoToDateRange:u,cellArray:f,cellIndex:d,rangeIndex:n,className:c,isBeingEdited:b,onChange:l,grid:a,cell:e})}))}))}),C=n(230),T=n(52),R=n(233),N=n(229),k=n(112),H=n(235),I=n(231),W=n(232),z=n(41),Z=n(236),S=n(234),F=function(e){return function(t){var n,a,c,r;if("changedTouches"in t){var l=t.changedTouches[0];n=l.clientX,a=l.clientY,c=l.pageX,r=l.pageY}else n=t.clientX,a=t.clientY,c=t.pageX,r=t.pageY;var s=e.getBoundingClientRect(),i=s.top,o=s.left;return{clientX:n,clientY:a,pageX:c,pageY:r,top:i,left:o,x:n-o,y:a-i}}},L=Object(N.a)(function(e){e.preventDefault(),e.stopPropagation()});function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.passive,a=void 0===n||n,r=t.enabled,l=void 0===r||r,s=Object(c.useState)({scrollTop:0,scrollLeft:0}),i=Object(u.a)(s,2),o=i[0],d=i[1];return function(e,t,n,a){var r=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).enabled,l=void 0===r||r;Object(c.useEffect)(function(){if(null!==e.current)return l?e.current.addEventListener(t,n,a):n&&e.current.removeEventListener(t,n),function(){e.current&&e.current.removeEventListener(t,n)}},[e.current,n,a,l])}(e,"scroll",function(e){if(e&&e.target){var t=e.target,n=t.scrollTop,a=t.scrollLeft;d({scrollTop:n,scrollLeft:a})}},{passive:a},{enabled:l}),o}function V(e,t){var n=t.top,a=void 0!==n&&n,r=t.left,l=void 0!==r&&r,s=B(e,{enabled:a||l}),i=s.scrollLeft,o=s.scrollTop;return Object(c.useMemo)(function(){return{transform:"translate(".concat(l?i:0,"px, ").concat(a?o:0,"px)"),zIndex:3}},[l?i:0,a?o:0])}var P=function(e,t){return 1+Math.abs(t-e)},A=function(e){var t=e.startX,n=e.startY,c=e.toMin,r=e.originDate;return Object(a.addMinutes)(Object(a.addDays)(r,t),c(n))},Q=n(110),U=n.n(Q);function K(e){return U()(Object(o.a)(e).map(function(e){return e.map(function(e){return new Date(e)})}))}function q(e,t){return null===t?e:K([].concat(Object(o.a)(e),Object(o.a)(t))).sort(function(e,t){return Object(a.compareAsc)(e[0],t[0])})}var J=function(e){return 1*e},G=function(e){return e/1},$=r.a.memo(function(e){var t=e.verticalPrecision,n=void 0===t?30:t,l=e.visualGridVerticalPrecision,s=void 0===l?30:l,b=e.schedule,g=e.originDate,v=void 0===g?new Date:g,_=e.classes,y=1440/n,Y=Object(c.useCallback)(function(e){return e*n},[n]),E=function(e){return e/n},D=Object(c.useMemo)(function(){return function(e){var t=e.fromY,n=e.fromX,c=e.originDate;return function(e){var r=e.startX,l=e.startY,s=e.endX,i=e.spanY;return Object(p.range)(r,s+1).map(function(e){var r=A({startX:e,startY:l,toMin:t,toDay:n,originDate:c}),s=Object(a.addMinutes)(r,t(i));return Object(a.isEqual)(s,Object(a.startOfDay)(s))&&(s=Object(a.endOfDay)(Object(a.subDays)(s,1))),Object(a.isBefore)(r,s)?[r,s]:[s,r]}).sort(function(e,t){return Object(a.isBefore)(e[0],t[0])?0:1})}}({originDate:v,fromY:Y,fromX:J})},[Y,J,v]),X=Object(c.useCallback)(function(e){var t=D(e),n=Object(d.a)(t),a=n[0],c=n.slice(1);return h()(0===c.length,'Expected "cellInfoToSingleDateRange" to return a single date range, found '.concat(c.length," additional ranges instead. This is a bug in @remotelock/weekly-scheduler")),a},[D]),x=Object(c.useMemo)(function(){return function(e){var t=e.toX,n=void 0===t?function(e){return e}:t,c=e.toY,r=e.numVerticalCells,l=e.originDate;return function(e){var t=Object(u.a)(e,2),s=t[0],i=t[1],o=Object(a.startOfDay)(s),d=n(Object(a.differenceInDays)(s,l)),b=c(Object(a.differenceInMinutes)(s,o)),f=n(Object(a.differenceInDays)(i,l)),m=c(Object(a.differenceInMinutes)(i,Object(a.startOfDay)(i)))-1,g=Object(p.range)(d,f+1).map(function(e){var t=e===d?b:0,n=e===f?m:r-1;return{startX:e,startY:t,endX:e,endY:n,spanX:P(e,e),spanY:P(t,n)}});return Object(a.isEqual)(i,Object(a.startOfDay)(i))&&g.pop(),g}}({originDate:v,numVerticalCells:y,numHorizontalCells:7,toX:G,toY:E})},[E,G,y,7,v]),B=Object(c.useRef)(null),Q=Object(c.useRef)(null),U=V(B,{top:!1,left:!0}),$=V(B,{top:!1,left:!1}),ee=f()(Q),te=function(e){var t=Object(c.useState)({transform:"translate(0, 0)",width:0,height:0}),n=Object(u.a)(t,2),a=n[0],r=n[1],l=Object(c.useState)(null),s=Object(u.a)(l,2),i=s[0],o=s[1],d=Object(c.useState)(!1),b=Object(u.a)(d,2),f=b[0],m=b[1],g=Object(c.useState)(!1),h=Object(u.a)(g,2),O=h[0],j=h[1];return Object(c.useEffect)(function(){var t=e.current;if(t){var n=F(t),a=Object(C.a)(window,"touchmove",{passive:!1}).pipe(L),c=Object(C.a)(window,"touchend",{passive:!0}),l=Object(C.a)(t,"touchstart",{passive:!1}).pipe(Object(k.a)(function(e){return Object(T.a)(e).pipe(Object(H.a)(300),Object(I.a)(a),L)})),s=Object(C.a)(t,"mousedown",{passive:!0}).pipe(Object(W.a)(function(e){return 1===e.which})),i=Object(C.a)(window,"mousemove",{passive:!0}),u=Object(C.a)(window,"mouseup",{passive:!0}),d=Object(R.a)(s,l).pipe(Object(z.a)(n)),b=Object(R.a)(u,c).pipe(Object(z.a)(n),Object(N.a)(function(){m(!1),j(!0)})),f=Object(R.a)(i,a).pipe(Object(z.a)(n)),g=d.pipe(Object(N.a)(function(){m(!0),j(!1)}),Object(k.a)(function(e){return f.pipe(Object(Z.a)(e),Object(z.a)(function(n){var a=Math.max(e.x,0),c=Math.max(e.y,0),r=Math.min(n.x,t.scrollWidth),l=Math.min(n.y,t.scrollHeight),s=Math.min(c,l),i=Math.max(c,l),o=Math.min(a,r),u=Math.max(a,r);return{startX:a,startY:c,endX:r,endY:l,top:s,bottom:i,left:o,right:u,width:u-o,height:i-s}}),Object(I.a)(b))}),Object(S.a)(p.isEqual)),h=g.pipe(Object(z.a)(function(e){var t=e.top,n=e.left,a=e.width,c=e.height;return{transform:"translate(".concat(n,"px, ").concat(t,"px)"),width:a,height:c}})),O=g.subscribe(o),v=h.subscribe(r);return function(){O.unsubscribe(),v.unsubscribe()}}},[e.current]),{style:a,box:i,isDragging:f,cancel:Object(c.useCallback)(function(){m(!1),j(!1),o(null)},[o]),hasFinishedDragging:O}}(Q),ne=te.style,ae=te.box,ce=te.isDragging,re=te.hasFinishedDragging,le=te.cancel,se=Object(c.useState)(null),ie=Object(u.a)(se,2),oe=ie[0],ue=ie[1],de=Object(j.a)(b),be=Object(u.a)(de,2),fe=be[0],me=be[1],ge=me.set,he=me.undo,pe=me.redo,Oe=me.canUndo,je=me.canRedo,ve=Object(c.useMemo)(function(){var e=null,t=null;if(null!==Q.current){var n=Q.current;e=n.scrollHeight,t=n.scrollWidth}return{totalHeight:e,totalWidth:t}},[Q.current,ee]),_e=ve.totalHeight,ye=ve.totalWidth,Ye=Object(c.useMemo)(function(){return null===_e||null===ye?null:function(e){var t=e.totalHeight,n=e.totalWidth,a=e.numVerticalCells,c=e.numHorizontalCells,r=Object(p.floor)(t/a),l=Object(p.floor)(n/c);return{totalHeight:t,totalWidth:n,numVerticalCells:a,numHorizontalCells:c,cellWidth:l,cellHeight:r,getRectFromCell:function(e){var t=e.endX,n=e.startX,a=e.endY,c=e.startY,r=e.spanX,l=e.spanY;return{bottom:a*this.cellHeight,top:c*this.cellHeight,left:n*this.cellWidth,right:t*this.cellWidth,height:l*this.cellHeight,width:r*this.cellWidth,startX:n*this.cellWidth,endX:t*this.cellWidth,startY:c*this.cellHeight,endY:a*this.cellHeight}},getCellFromRect:function(e){var t=Object(p.clamp)(Object(p.floor)(e.left/this.cellWidth),0,c-1),n=Object(p.clamp)(Object(p.round)(e.top/this.cellHeight),0,a-1),r=Object(p.clamp)(Object(p.floor)(e.right/this.cellWidth),0,c-1),l=Object(p.clamp)(Object(p.round)(e.bottom/this.cellHeight),0,a-1);return{spanX:Object(p.clamp)(P(t,r),1,c),spanY:Object(p.clamp)(P(n,l),1,a),startX:t,startY:n,endX:r,endY:l}}}}({totalHeight:_e,totalWidth:ye,numHorizontalCells:7,numVerticalCells:y})},[_e,ye,7,y]);Object(c.useEffect)(function(){if(null!==Ye&&null!==ae){var e=ae,t=Ye.getCellFromRect(e),n=D(t);ue(n)}else ue(null)},[ae,Ye,ue]),Object(c.useEffect)(function(){re&&(ge(q(fe.present,oe)),ue(null))},[re,ge,ue,oe,fe.present]),w("ctrl+z",function(){Oe&&he()},document),w("ctrl+shift+z",function(){je&&pe()},document),w("esc",function(){oe&&le()},document),Object(c.useEffect)(function(){le()},[ee]);var Ee=Object(c.useCallback)(function(e,t){if(!fe.present&&e)return[e];var n=Object(o.a)(fe.present);e?n[t]=e:n.splice(t,1),ge(K(n))},[fe.present]),De=Object(c.useMemo)(function(){return function(e){var t=e.fromY,n=e.fromX,c=e.originDate;return function(e){var r=e.startX,l=e.startY,s=e.endX,i=e.endY,o=A({startX:r,startY:l,toMin:t,toDay:n,originDate:c}),u=A({startX:s,startY:i,toMin:t,toDay:n,originDate:c});return[Object(a.isBefore)(o,u)?[o,u]:[u,o]]}}({originDate:v,fromX:J,fromY:function(e){return e*s}})},[s,J,v]);return Object(c.useEffect)(function(){B.current&&B.current.contains(document.activeElement)&&document.activeElement&&Object(O.a)(document.activeElement,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})},[B.current,document.activeElement,fe.present]),r.a.createElement("div",{ref:B,className:Object(m.a)([_.root,Object(i.a)({},_["no-scroll"],ce)])},r.a.createElement("div",{style:U,className:_.timeline},r.a.createElement("div",{className:_.header},r.a.createElement("div",{className:_["day-column"]},r.a.createElement("div",{className:Object(m.a)([_.cell,_.title])},"T"))),r.a.createElement("div",{className:_.calendar},r.a.createElement("div",{className:_["day-column"]},r.a.createElement("div",{className:_["day-hours"]},Object(p.times)(48).map(function(e){var t="";if(e%2===0){var n=De({startX:0,startY:e,endX:0,endY:e+1,spanX:1,spanY:1}),c=Object(u.a)(n,1),l=Object(u.a)(c[0],1)[0];t=Object(a.format)(l,"h a")}return r.a.createElement("div",{key:e,className:_.cell},r.a.createElement("div",{className:_.time},t))}))))),r.a.createElement("div",null,r.a.createElement("div",{style:$,className:Object(m.a)([_.calendar,_.header])},Object(p.times)(7).map(function(e){return r.a.createElement("div",{key:e,className:_["day-column"]},r.a.createElement("div",{className:Object(m.a)([_.cell,_.title])},Object(a.format)(Object(a.addDays)(v,e),"ddd")))})),r.a.createElement("div",{className:_["layer-container"]},ce&&r.a.createElement("div",{className:_["drag-box"],style:ne},re&&r.a.createElement("div",{className:_.popup})),Ye&&oe&&ce&&r.a.createElement(M,{classes:_,dateRangeToCells:x,cellInfoToDateRange:X,className:_["is-pending-creation"],ranges:q(fe.present,oe),grid:Ye}),Ye&&!oe&&r.a.createElement(M,{classes:_,dateRangeToCells:x,cellInfoToDateRange:X,isResizable:!0,isMovable:!0,isDeletable:!0,onChange:Ee,ranges:fe.present,grid:Ye}),r.a.createElement("div",{ref:Q,className:_.calendar},Object(p.times)(7).map(function(e){return r.a.createElement("div",{key:e,className:_["day-column"]},r.a.createElement("div",{className:_["day-hours"]},Object(p.times)(48).map(function(t){return r.a.createElement("div",{key:t,className:_.cell},r.a.createElement("div",{className:_.debug},"(",e,", ",t,")"))})))})))))}),ee=n(111),te=n.n(ee),ne=[["2019-03-03T22:45:00.000Z","2019-03-04T01:15:00.000Z"],["2019-03-05T22:00:00.000Z","2019-03-06T01:00:00.000Z"],["2019-03-04T22:15:00.000Z","2019-03-05T01:00:00.000Z"],["2019-03-07T05:30:00.000Z","2019-03-07T10:00:00.000Z"],["2019-03-08T22:00:00.000Z","2019-03-09T01:00:00.000Z"],["2019-03-09T22:00:00.000Z","2019-03-10T01:00:00.000Z"],["2019-03-06T22:00:00.000Z","2019-03-07T01:00:00.000Z"]].map(function(e){return e.map(function(e){return new Date(e)})}).sort(function(e,t){return Object(a.compareAsc)(e[0],t[0])}),ae=document.getElementById("root");s.a.render(r.a.createElement($,{classes:te.a,originDate:Object(a.startOfWeek)(new Date("2019-03-04"),{weekStartsOn:1}),schedule:ne,verticalPrecision:15}),ae)}},[[114,1,2]]]);
//# sourceMappingURL=main.51e46feb.chunk.js.map