(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports={"no-scroll":"styles_no-scroll__1vsU8",root:"styles_root__3QAxj",timeline:"styles_timeline__106Mk",debug:"styles_debug__2SKKM","debug-active":"styles_debug-active___9OUc",calendar:"styles_calendar__3Xx2Y","react-draggable":"styles_react-draggable__2QRVw","handle-wrapper":"styles_handle-wrapper__2T7f7",handle:"styles_handle__1dKGL",top:"styles_top__2FFal",bottom:"styles_bottom__3nd0X","layer-container":"styles_layer-container__1Quoi",event:"styles_event__bjik1","drag-box":"styles_drag-box__OvX9t",draggable:"styles_draggable__a1ktL","button-reset":"styles_button-reset__3_zQt","is-draggable":"styles_is-draggable__2U2x2","react-draggable-dragging":"styles_react-draggable-dragging__1T3s8","is-pending-creation":"styles_is-pending-creation__2vDDI","hours-container":"styles_hours-container__3XZzL","day-column":"styles_day-column__2sQzS","day-hours":"styles_day-hours__3_7p4",cell:"styles_cell__1OJUD",time:"styles_time__1X-Hn",title:"styles_title__2dKTz",header:"styles_header__1IF59",first:"styles_first__1t63n",popup:"styles_popup__2oSt1","range-boxes":"styles_range-boxes__39XBE","event-content":"styles_event-content__1EBie",start:"styles_start__2DXVx",end:"styles_end__2XnIt"}},114:function(e,t,n){e.exports=n(226)},226:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),l=n(66),s=n.n(l),i=(n(103),n(20)),o=n(25),u=n(7),d=n(104),b=n(105),f=n.n(b),m=n(8),g=n(38),h=n.n(g),p=n(5),O=n(113),j=n(106),v=n(21),_=n(107),y=n(108),Y=n.n(y),E=n(109),D=n.n(E),X=new WeakMap;function w(e,t,n){var a=Object(c.useRef)(null);a.current=t,Object(c.useEffect)(function(){if(n){var t=X.get(n);return t||(t=new Mousetrap(n),X.set(n,t)),t.bind(e,function(){"function"===typeof a.current&&a.current()}),function(){D.a.unbind(e)}}},[e,n])}var M=r.a.memo(function(e){var t,n=e.classes,l=e.grid,s=e.isBeingEdited,o=e.rangeIndex,d=e.cellIndex,b=e.cellArray,f=e.cell,g=e.className,p=e.onChange,O=e.cellInfoToDateRange,j=e.isResizable,y=e.isDeletable,E=e.isMovable,D=Object(c.useRef)(null),X=Object(c.useState)(f),M=Object(u.a)(X,2),C=M[0],x=M[1],T=Object(c.useMemo)(function(){return l.getRectFromCell(f)},[f,l]),R=Object(c.useMemo)(function(){return l.getRectFromCell(C)},[C,l]);Object(c.useEffect)(function(){x(f)},[f]);var N=Object(c.useMemo)(function(){return O(C)},[C]);w("del",Object(c.useCallback)(function(){y&&p&&p(void 0,o)},[D.current,p,y,o]),D.current);var k=R.top,H=R.left,I=R.width,W=R.height,z={width:I,height:W},Z=0===d,S=d===b.length-1,F=Object(c.useCallback)(function(){p&&p(O(C),o)},[C,o,O,p]);w("up",function(){if(E&&0!==C.startY){var e=Object(v.a)({},C,{startY:C.startY-1,endY:C.endY-1});p&&p(O(e),o)}},D.current),w("down",function(){if(E&&C.endY!==l.numVerticalCells-1){var e=Object(v.a)({},C,{startY:C.startY+1,endY:C.endY+1});p&&p(O(e),o)}},D.current);var L=Object(c.useCallback)(function(e,t){var n=t.y;if(E){e.preventDefault(),e.stopPropagation();var a=n,c=a+R.height,r=Math.min(a,c),s=r+R.height;if(r!==k){var i=Object(v.a)({},R,{top:r,bottom:s}),o=l.getCellFromRect(i),u=o.startY,d=o.endY,b=Object(v.a)({},f,{startY:u,endY:d});h()(b.spanY===f.spanY,"Expected the dragged time cell to have the same height (".concat(b.spanY,", ").concat(f.spanY,")")),x(b)}}},[l,R,E,x]),B=Object(c.useCallback)(function(e,t,n,a){if(j&&(e.preventDefault(),e.stopPropagation(),0!==a.height)){var c={height:a.height+R.height,width:a.width+R.width},r=Object(v.a)({},T,c);t.includes("top")?r.top-=a.height:t.includes("bottom")&&(r.bottom+=a.height);var s=l.getCellFromRect(r),i=s.spanY,o=s.startY,u=s.endY,d=Object(v.a)({},f,{spanY:i,startY:o,endY:u});x(d)}},[l,R,j,x,T]);return r.a.createElement(Y.a,{axis:E?"y":"none",bounds:{top:0,bottom:l.totalHeight-W,left:0,right:l.totalWidth},position:{x:H,y:k},onDrag:L,onStop:F,cancel:".".concat(n.handle)},r.a.createElement("button",{className:Object(m.a)([n.event,n["button-reset"],n["range-box"],g,(t={},Object(i.a)(t,n["is-draggable"],E),Object(i.a)(t,n["is-being-edited"],s&&s(f)),t)]),ref:D,tabIndex:0,style:z},r.a.createElement(_.a,{size:T,onResize:B,onResizeStop:F,handleWrapperClass:n["handle-wrapper"],enable:j?{top:!0,bottom:!0}:{},handleClasses:{bottom:Object(m.a)([n.handle,n.bottom]),bottomLeft:Object(m.a)([n.handle,n["bottom-left"]]),bottomRight:Object(m.a)([n.handle,n["bottom-right"]]),left:Object(m.a)([n.handle,n.left]),right:Object(m.a)([n.handle,n.right]),top:Object(m.a)([n.handle,n.top]),topLeft:Object(m.a)([n.handle,n["top-left"]]),topRight:Object(m.a)([n.handle,n["top-right"]])}},r.a.createElement("div",{className:n["event-content"],style:z},r.a.createElement("span",{className:n.start},Z&&Object(a.format)(N[0],"h:mma")),r.a.createElement("span",{className:n.end},S&&Object(a.format)(N[1],"h:mma"))))))}),C=r.a.memo(function(e){var t=e.classes,n=e.ranges,a=e.grid,c=e.className,l=e.onChange,s=e.isResizable,i=e.isDeletable,o=e.isMovable,u=e.cellInfoToDateRange,d=e.dateRangeToCells,b=e.isBeingEdited;return r.a.createElement("div",{className:t["range-boxes"]},n.map(function(e,n){return r.a.createElement("span",{key:n},d(e).map(function(e,d,f){return r.a.createElement(M,{classes:t,key:d,isResizable:s,isMovable:o,isDeletable:i,cellInfoToDateRange:u,cellArray:f,cellIndex:d,rangeIndex:n,className:c,isBeingEdited:b,onChange:l,grid:a,cell:e})}))}))}),x=n(230),T=n(52),R=n(233),N=n(229),k=n(112),H=n(235),I=n(231),W=n(232),z=n(41),Z=n(236),S=n(234),F=function(e){return function(t){var n,a,c,r;if("changedTouches"in t){var l=t.changedTouches[0];n=l.clientX,a=l.clientY,c=l.pageX,r=l.pageY}else n=t.clientX,a=t.clientY,c=t.pageX,r=t.pageY;var s=e.getBoundingClientRect(),i=s.top,o=s.left;return{clientX:n,clientY:a,pageX:c,pageY:r,top:i,left:o,x:n-o,y:a-i}}};function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.passive,a=void 0===n||n,r=t.enabled,l=void 0===r||r,s=Object(c.useState)({scrollTop:0,scrollLeft:0}),i=Object(u.a)(s,2),o=i[0],d=i[1];return function(e,t,n,a){var r=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).enabled,l=void 0===r||r;Object(c.useEffect)(function(){if(null!==e.current)return l?e.current.addEventListener(t,n,a):n&&e.current.removeEventListener(t,n),function(){e.current&&e.current.removeEventListener(t,n)}},[e.current,n,a,l])}(e,"scroll",function(e){if(e&&e.target){var t=e.target,n=t.scrollTop,a=t.scrollLeft;d({scrollTop:n,scrollLeft:a})}},{passive:a},{enabled:l}),o}function B(e,t){var n=t.top,a=void 0!==n&&n,r=t.left,l=void 0!==r&&r,s=L(e,{enabled:a||l}),i=s.scrollLeft,o=s.scrollTop;return Object(c.useMemo)(function(){return{transform:"translate(".concat(l?i:0,"px, ").concat(a?o:0,"px)"),zIndex:3}},[l?i:0,a?o:0])}var V=function(e,t){return 1+Math.abs(t-e)},P=function(e){var t=e.startX,n=e.startY,c=e.toMin,r=e.originDate;return Object(a.addMinutes)(Object(a.addDays)(r,t),c(n))},A=n(110),Q=n.n(A);function U(e){return Q()(Object(o.a)(e).map(function(e){return e.map(function(e){return new Date(e)})}))}function K(e,t){return null===t?e:U([].concat(Object(o.a)(e),Object(o.a)(t))).sort(function(e,t){return Object(a.compareAsc)(e[0],t[0])})}var q=function(e){return 1*e},J=function(e){return e/1},G=r.a.memo(function(e){var t=e.verticalPrecision,n=void 0===t?30:t,l=e.visualGridVerticalPrecision,s=void 0===l?30:l,b=e.schedule,g=e.originDate,v=void 0===g?new Date:g,_=e.classes,y=1440/n,Y=Object(c.useCallback)(function(e){return e*n},[n]),E=function(e){return e/n},D=Object(c.useMemo)(function(){return function(e){var t=e.fromY,n=e.fromX,c=e.originDate;return function(e){var r=e.startX,l=e.startY,s=e.endX,i=e.spanY;return Object(p.range)(r,s+1).map(function(e){var r=P({startX:e,startY:l,toMin:t,toDay:n,originDate:c}),s=Object(a.addMinutes)(r,t(i));return Object(a.isEqual)(s,Object(a.startOfDay)(s))&&(s=Object(a.endOfDay)(Object(a.subDays)(s,1))),Object(a.isBefore)(r,s)?[r,s]:[s,r]}).sort(function(e,t){return Object(a.isBefore)(e[0],t[0])?0:1})}}({originDate:v,fromY:Y,fromX:q})},[Y,q,v]),X=Object(c.useCallback)(function(e){var t=D(e),n=Object(d.a)(t),a=n[0],c=n.slice(1);return h()(0===c.length,'Expected "cellInfoToSingleDateRange" to return a single date range, found '.concat(c.length," additional ranges instead. This is a bug in @remotelock/weekly-scheduler")),a},[D]),M=Object(c.useMemo)(function(){return function(e){var t=e.toX,n=void 0===t?function(e){return e}:t,c=e.toY,r=e.numVerticalCells,l=e.originDate;return function(e){var t=Object(u.a)(e,2),s=t[0],i=t[1],o=Object(a.startOfDay)(s),d=n(Object(a.differenceInDays)(s,l)),b=c(Object(a.differenceInMinutes)(s,o)),f=n(Object(a.differenceInDays)(i,l)),m=c(Object(a.differenceInMinutes)(i,Object(a.startOfDay)(i)))-1,g=Object(p.range)(d,f+1).map(function(e){var t=e===d?b:0,n=e===f?m:r-1;return{startX:e,startY:t,endX:e,endY:n,spanX:V(e,e),spanY:V(t,n)}});return Object(a.isEqual)(i,Object(a.startOfDay)(i))&&g.pop(),g}}({originDate:v,numVerticalCells:y,numHorizontalCells:7,toX:J,toY:E})},[E,J,y,7,v]),L=Object(c.useRef)(null),A=Object(c.useRef)(null),Q=B(L,{top:!1,left:!0}),G=B(L,{top:!1,left:!1}),$=f()(A),ee=function(e){var t=Object(c.useState)({top:0,left:0,width:0,height:0}),n=Object(u.a)(t,2),a=n[0],r=n[1],l=Object(c.useState)(null),s=Object(u.a)(l,2),i=s[0],o=s[1],d=Object(c.useState)(!1),b=Object(u.a)(d,2),f=b[0],m=b[1],g=Object(c.useState)(!1),h=Object(u.a)(g,2),O=h[0],j=h[1];return Object(c.useEffect)(function(){var t=e.current;if(t){var n=F(t),a=Object(N.a)(function(e){e.preventDefault(),e.stopPropagation()}),c=Object(x.a)(window,"touchmove",{passive:!1}).pipe(a),l=Object(x.a)(window,"touchend",{passive:!0}),s=Object(x.a)(t,"touchstart",{passive:!1}).pipe(Object(k.a)(function(e){return Object(T.a)(e).pipe(Object(H.a)(300),Object(I.a)(c),a)})),i=Object(x.a)(t,"mousedown",{passive:!0}).pipe(Object(W.a)(function(e){return 1===e.which})),u=Object(x.a)(window,"mousemove",{passive:!0}),d=Object(x.a)(window,"mouseup",{passive:!0}),b=Object(R.a)(i,s).pipe(Object(z.a)(n)),f=Object(R.a)(d,l).pipe(Object(z.a)(n),Object(N.a)(function(){m(!1),j(!0)})),g=Object(R.a)(u,c).pipe(Object(z.a)(n)),h=b.pipe(Object(N.a)(function(){m(!0),j(!1)}),Object(k.a)(function(e){return g.pipe(Object(Z.a)(e),Object(z.a)(function(n){var a=Math.max(e.x,0),c=Math.max(e.y,0),r=Math.min(n.x,t.scrollWidth),l=Math.min(n.y,t.scrollHeight),s=Math.min(c,l),i=Math.max(c,l),o=Math.min(a,r),u=Math.max(a,r);return{startX:a,startY:c,endX:r,endY:l,top:s,bottom:i,left:o,right:u,width:u-o,height:i-s}}),Object(I.a)(f))}),Object(S.a)(p.isEqual)),O=h.pipe(Object(z.a)(function(e){return{top:e.top,left:e.left,width:e.width,height:e.height}})),v=h.subscribe(o),_=O.subscribe(r);return function(){v.unsubscribe(),_.unsubscribe()}}},[]),{style:a,box:i,isDragging:f,cancel:Object(c.useCallback)(function(){m(!1),j(!1),o(null)},[o]),hasFinishedDragging:O}}(A),te=ee.style,ne=ee.box,ae=ee.isDragging,ce=ee.hasFinishedDragging,re=ee.cancel,le=Object(c.useState)(null),se=Object(u.a)(le,2),ie=se[0],oe=se[1],ue=Object(j.a)(b),de=Object(u.a)(ue,2),be=de[0],fe=de[1],me=fe.set,ge=fe.undo,he=fe.redo,pe=fe.canUndo,Oe=fe.canRedo,je=Object(c.useMemo)(function(){var e=null,t=null;if(null!==A.current){var n=A.current;e=n.scrollHeight,t=n.scrollWidth}return{totalHeight:e,totalWidth:t}},[A.current,$]),ve=je.totalHeight,_e=je.totalWidth,ye=Object(c.useMemo)(function(){return null===ve||null===_e?null:function(e){var t=e.totalHeight,n=e.totalWidth,a=e.numVerticalCells,c=e.numHorizontalCells,r=Object(p.floor)(t/a),l=Object(p.floor)(n/c);return{totalHeight:t,totalWidth:n,numVerticalCells:a,numHorizontalCells:c,cellWidth:l,cellHeight:r,getRectFromCell:function(e){var t=e.endX,n=e.startX,a=e.endY,c=e.startY,r=e.spanX,l=e.spanY;return{bottom:a*this.cellHeight,top:c*this.cellHeight,left:n*this.cellWidth,right:t*this.cellWidth,height:l*this.cellHeight,width:r*this.cellWidth,startX:n*this.cellWidth,endX:t*this.cellWidth,startY:c*this.cellHeight,endY:a*this.cellHeight}},getCellFromRect:function(e){var t=Object(p.clamp)(Object(p.floor)(e.left/this.cellWidth),0,c-1),n=Object(p.clamp)(Object(p.round)(e.top/this.cellHeight),0,a-1),r=Object(p.clamp)(Object(p.floor)(e.right/this.cellWidth),0,c-1),l=Object(p.clamp)(Object(p.round)(e.bottom/this.cellHeight),0,a-1);return{spanX:Object(p.clamp)(V(t,r),1,c),spanY:Object(p.clamp)(V(n,l),1,a),startX:t,startY:n,endX:r,endY:l}}}}({totalHeight:ve,totalWidth:_e,numHorizontalCells:7,numVerticalCells:y})},[ve,_e,7,y]);Object(c.useEffect)(function(){if(null!==ye&&null!==ne){var e=ne,t=ye.getCellFromRect(e),n=D(t);oe(n)}else oe(null)},[ne,ye,oe]),Object(c.useEffect)(function(){ce&&(me(K(be.present,ie)),oe(null))},[ce,me,oe,ie,be.present]),w("ctrl+z",function(){pe&&ge()},document),w("ctrl+shift+z",function(){Oe&&he()},document),w("esc",function(){ie&&re()},document),Object(c.useEffect)(function(){re()},[$]);var Ye=Object(c.useCallback)(function(e,t){if(!be.present&&e)return[e];var n=Object(o.a)(be.present);e?n[t]=e:n.splice(t,1),me(U(n))},[be.present]),Ee=Object(c.useMemo)(function(){return function(e){var t=e.fromY,n=e.fromX,c=e.originDate;return function(e){var r=e.startX,l=e.startY,s=e.endX,i=e.endY,o=P({startX:r,startY:l,toMin:t,toDay:n,originDate:c}),u=P({startX:s,startY:i,toMin:t,toDay:n,originDate:c});return[Object(a.isBefore)(o,u)?[o,u]:[u,o]]}}({originDate:v,fromX:q,fromY:function(e){return e*s}})},[s,q,v]);return Object(c.useEffect)(function(){L.current&&L.current.contains(document.activeElement)&&document.activeElement&&Object(O.a)(document.activeElement,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})},[L.current,document.activeElement,be.present]),r.a.createElement("div",{ref:L,className:Object(m.a)([_.root,Object(i.a)({},_["no-scroll"],ae)])},r.a.createElement("div",{style:Q,className:_.timeline},r.a.createElement("div",{className:_.header},r.a.createElement("div",{className:_["day-column"]},r.a.createElement("div",{className:Object(m.a)([_.cell,_.title])},"T"))),r.a.createElement("div",{className:_.calendar},r.a.createElement("div",{className:_["day-column"]},r.a.createElement("div",{className:_["day-hours"]},Object(p.times)(48).map(function(e){var t="";if(e%2===0){var n=Ee({startX:0,startY:e,endX:0,endY:e+1,spanX:1,spanY:1}),c=Object(u.a)(n,1),l=Object(u.a)(c[0],1)[0];t=Object(a.format)(l,"h a")}return r.a.createElement("div",{key:e,className:_.cell},r.a.createElement("div",{className:_.time},t))}))))),r.a.createElement("div",null,r.a.createElement("div",{style:G,className:Object(m.a)([_.calendar,_.header])},Object(p.times)(7).map(function(e){return r.a.createElement("div",{key:e,className:_["day-column"]},r.a.createElement("div",{className:Object(m.a)([_.cell,_.title])},Object(a.format)(Object(a.addDays)(v,e),"ddd")))})),r.a.createElement("div",{className:_["layer-container"]},ae&&r.a.createElement("div",{className:_["drag-box"],style:te},ce&&r.a.createElement("div",{className:_.popup})),ye&&ie&&ae&&r.a.createElement(C,{classes:_,dateRangeToCells:M,cellInfoToDateRange:X,className:_["is-pending-creation"],ranges:K(be.present,ie),grid:ye}),ye&&!ie&&r.a.createElement(C,{classes:_,dateRangeToCells:M,cellInfoToDateRange:X,isResizable:!0,isMovable:!0,isDeletable:!0,onChange:Ye,ranges:be.present,grid:ye}),r.a.createElement("div",{ref:A,className:_.calendar},Object(p.times)(7).map(function(e){return r.a.createElement("div",{key:e,className:_["day-column"]},r.a.createElement("div",{className:_["day-hours"]},Object(p.times)(48).map(function(t){return r.a.createElement("div",{key:t,className:_.cell},r.a.createElement("div",{className:_.debug},"(",e,", ",t,")"))})))})))))}),$=n(111),ee=n.n($),te=[["2019-03-03T22:45:00.000Z","2019-03-04T01:15:00.000Z"],["2019-03-05T22:00:00.000Z","2019-03-06T01:00:00.000Z"],["2019-03-04T22:15:00.000Z","2019-03-05T01:00:00.000Z"],["2019-03-07T05:30:00.000Z","2019-03-07T10:00:00.000Z"],["2019-03-08T22:00:00.000Z","2019-03-09T01:00:00.000Z"],["2019-03-09T22:00:00.000Z","2019-03-10T01:00:00.000Z"],["2019-03-06T22:00:00.000Z","2019-03-07T01:00:00.000Z"]].map(function(e){return e.map(function(e){return new Date(e)})}).sort(function(e,t){return Object(a.compareAsc)(e[0],t[0])}),ne=document.getElementById("root");s.a.render(r.a.createElement(G,{classes:ee.a,originDate:Object(a.startOfWeek)(new Date("2019-03-04"),{weekStartsOn:1}),schedule:te,verticalPrecision:15}),ne)}},[[114,1,2]]]);
//# sourceMappingURL=main.c4d75233.chunk.js.map