(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){e.exports=a(226)},226:function(e,t,a){"use strict";a.r(t);var n=a(21),c=a(26),r=a(8),l=a(104),s=a(105),i=a.n(s),o=a(9),u=a(2),d=a(39),b=a.n(d),f=a(6),m=a(0),g=a.n(m),h=a(67),p=a.n(h),O=(a(225),a(112)),j=a(106),v=a(22),_=a(107),y=a(108),Y=a.n(y),E=a(109),D=a.n(E),X=new WeakMap;function w(e,t,a){var n=Object(m.useRef)(null);n.current=t,Object(m.useEffect)(function(){if(a){var t=X.get(a);return t||(t=new Mousetrap(a),X.set(a,t)),t.bind(e,function(){"function"===typeof n.current&&n.current()}),function(){D.a.unbind(e)}}},[e,a])}function M(e){var t,a=e.classes,c=e.grid,l=e.isBeingEdited,s=e.rangeIndex,i=e.cellIndex,d=e.cellArray,f=e.cell,h=e.className,p=e.onChange,O=e.cellInfoToDateRange,j=e.isResizable,y=e.isDeletable,E=e.isMovable,D=Object(m.useRef)(null),X=Object(m.useState)(f),M=Object(r.a)(X,2),C=M[0],x=M[1],T=Object(m.useMemo)(function(){return c.getRectFromCell(f)},[f,c]),R=Object(m.useMemo)(function(){return c.getRectFromCell(C)},[C,c]);Object(m.useEffect)(function(){x(f)},[f]);var N=Object(m.useMemo)(function(){return O(C)},[C]);w("del",Object(m.useCallback)(function(){y&&p&&p(void 0,s)},[D.current,p,y,s]),D.current);var k=R.top,H=R.left,I=R.width,W=R.height,z={width:I,height:W},Z=0===i,S=i===d.length-1,F=Object(m.useCallback)(function(){p&&p(O(C),s)},[C,s,O,p]);w("up",function(){if(E&&0!==C.startY){var e=Object(v.a)({},C,{startY:C.startY-1,endY:C.endY-1});p&&p(O(e),s)}},D.current),w("down",function(){if(E&&C.endY!==c.numVerticalCells-1){var e=Object(v.a)({},C,{startY:C.startY+1,endY:C.endY+1});p&&p(O(e),s)}},D.current);var L=Object(m.useCallback)(function(e,t){var a=t.y;if(E){e.preventDefault(),e.stopPropagation();var n=a,r=n+R.height,l=Math.min(n,r),s=l+R.height;if(l!==k){var i=Object(v.a)({},R,{top:l,bottom:s}),o=c.getCellFromRect(i),u=o.startY,d=o.endY,m=Object(v.a)({},f,{startY:u,endY:d});b()(m.spanY===f.spanY,"Expected the dragged time cell to have the same height (".concat(m.spanY,", ").concat(f.spanY,")")),x(m)}}},[c,R,E,x]),B=Object(m.useCallback)(function(e,t,a,n){if(j&&(e.preventDefault(),e.stopPropagation(),0!==n.height)){var r={height:n.height+R.height,width:n.width+R.width},l=Object(v.a)({},T,r);t.includes("top")?l.top-=n.height:t.includes("bottom")&&(l.bottom+=n.height);var s=c.getCellFromRect(l),i=s.spanY,o=s.startY,u=s.endY,d=Object(v.a)({},f,{spanY:i,startY:o,endY:u});x(d)}},[c,R,j,x,T]);return g.a.createElement(Y.a,{axis:E?"y":"none",bounds:{top:0,bottom:c.totalHeight-W,left:0,right:c.totalWidth},position:{x:H,y:k},onDrag:L,onStop:F,cancel:".".concat(a.handle)},g.a.createElement("button",{className:Object(o.a)([a.event,a["button-reset"],a["range-box"],h,(t={},Object(n.a)(t,a["is-draggable"],E),Object(n.a)(t,a["is-being-edited"],l&&l(f)),t)]),ref:D,tabIndex:0,style:z},g.a.createElement(_.a,{size:T,onResize:B,onResizeStop:F,handleWrapperClass:a["handle-wrapper"],enable:j?{top:!0,bottom:!0}:{},handleClasses:{bottom:Object(o.a)([a.handle,a.bottom]),bottomLeft:Object(o.a)([a.handle,a["bottom-left"]]),bottomRight:Object(o.a)([a.handle,a["bottom-right"]]),left:Object(o.a)([a.handle,a.left]),right:Object(o.a)([a.handle,a.right]),top:Object(o.a)([a.handle,a.top]),topLeft:Object(o.a)([a.handle,a["top-left"]]),topRight:Object(o.a)([a.handle,a["top-right"]])}},g.a.createElement("div",{className:a["event-content"],style:z},g.a.createElement("span",{className:a.start},Z&&Object(u.format)(N[0],"h:mma")),g.a.createElement("span",{className:a.end},S&&Object(u.format)(N[1],"h:mma"))))))}function C(e){var t=e.classes,a=e.ranges,n=e.grid,c=e.className,r=e.onChange,l=e.isResizable,s=e.isDeletable,i=e.isMovable,o=e.cellInfoToDateRange,u=e.dateRangeToCells,d=e.isBeingEdited;return g.a.createElement("div",{className:t["range-boxes"]},a.map(function(e,a){return g.a.createElement("span",{key:a},u(e).map(function(e,u,b){return g.a.createElement(M,{classes:t,key:u,isResizable:l,isMovable:i,isDeletable:s,cellInfoToDateRange:o,cellArray:b,cellIndex:u,rangeIndex:a,className:c,isBeingEdited:d,onChange:r,grid:n,cell:e})}))}))}var x=a(229),T=a(53),R=a(232),N=a(111),k=a(235),H=a(230),I=a(231),W=a(233),z=a(40),Z=a(236),S=a(234),F=function(e){return function(t){var a,n,c,r;if("changedTouches"in t){var l=t.changedTouches[0];a=l.clientX,n=l.clientY,c=l.pageX,r=l.pageY}else a=t.clientX,n=t.clientY,c=t.pageX,r=t.pageY;var s=e.getBoundingClientRect(),i=s.top,o=s.left;return{clientX:a,clientY:n,pageX:c,pageY:r,top:i,left:o,x:a-o,y:n-i}}};function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.passive,n=void 0===a||a,c=t.enabled,l=void 0===c||c,s=Object(m.useState)({scrollTop:0,scrollLeft:0}),i=Object(r.a)(s,2),o=i[0],u=i[1];return function(e,t,a,n){var c=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).enabled,r=void 0===c||c;Object(m.useEffect)(function(){if(null!==e.current)return r?e.current.addEventListener(t,a,n):a&&e.current.removeEventListener(t,a),function(){e.current&&e.current.removeEventListener(t,a)}},[e.current,a,n,r])}(e,"scroll",function(e){if(e&&e.target){var t=e.target,a=t.scrollTop,n=t.scrollLeft;u({scrollTop:a,scrollLeft:n})}},{passive:n},{enabled:l}),o}function B(e,t){var a=t.top,n=void 0!==a&&a,c=t.left,r=void 0!==c&&c,l=L(e,{enabled:n||r}),s=l.scrollLeft,i=l.scrollTop;return Object(m.useMemo)(function(){return{transform:"translate(".concat(r?s:0,"px, ").concat(n?i:0,"px)"),zIndex:3}},[r?s:0,n?i:0])}var V=a(4),P=a.n(V),A=function(e,t){return 1+Math.abs(t-e)},Q=function(e){var t=e.totalHeight,a=e.totalWidth,n=e.numVerticalCells,c=e.numHorizontalCells;return{totalHeight:t,totalWidth:a,numVerticalCells:n,numHorizontalCells:c,cellWidth:a/c,cellHeight:t/n,getRectFromCell:function(e){var t=e.endX,a=e.startX,n=e.endY,c=e.startY,r=e.spanX,l=e.spanY;return{bottom:n*this.cellHeight,top:c*this.cellHeight,left:a*this.cellWidth,right:t*this.cellWidth,height:l*this.cellHeight,width:r*this.cellWidth,startX:a*this.cellWidth,endX:t*this.cellWidth,startY:c*this.cellHeight,endY:n*this.cellHeight}},getCellFromRect:function(e){var t=Object(f.clamp)(Object(f.floor)(e.left/this.cellWidth),0,c-1),a=Object(f.clamp)(Object(f.round)(e.top/this.cellHeight),0,n-1),r=Object(f.clamp)(Object(f.floor)(e.right/this.cellWidth),0,c-1),l=Object(f.clamp)(Object(f.round)(e.bottom/this.cellHeight),0,n-1);return{spanX:Object(f.clamp)(A(t,r),1,c),spanY:Object(f.clamp)(A(a,l),1,n),startX:t,startY:a,endX:r,endY:l}}}},U=function(e){var t=e.startX,a=e.startY,n=e.toMin,c=e.originDate;return Object(u.addMinutes)(Object(u.addDays)(c,t),n(a))},K=function(e){var t=e.fromY,a=e.fromX,n=e.originDate;return function(e){var c=e.startX,r=e.startY,l=e.endX,s=e.endY,i=U({startX:c,startY:r,toMin:t,toDay:a,originDate:n}),o=U({startX:l,startY:s,toMin:t,toDay:a,originDate:n});return[Object(u.isBefore)(i,o)?[i,o]:[o,i]]}},q=function(e){var t=e.fromY,a=e.fromX,n=e.originDate;return function(e){var c=e.startX,r=e.startY,l=e.endX,s=e.spanY;return Object(f.range)(c,l+1).map(function(e){var c=U({startX:e,startY:r,toMin:t,toDay:a,originDate:n}),l=Object(u.addMinutes)(c,t(s));return Object(u.isEqual)(l,Object(u.startOfDay)(l))&&(l=Object(u.endOfDay)(Object(u.subDays)(l,1))),Object(u.isBefore)(c,l)?[c,l]:[l,c]}).sort(function(e,t){return Object(u.isBefore)(e[0],t[0])?0:1})}},J=function(e){var t=e.toX,a=void 0===t?function(e){return e}:t,n=e.toY,c=e.numVerticalCells,l=e.originDate;return function(e){var t=Object(r.a)(e,2),s=t[0],i=t[1],o=Object(u.startOfDay)(s),d=a(Object(u.differenceInDays)(s,l)),b=n(Object(u.differenceInMinutes)(s,o)),m=a(Object(u.differenceInDays)(i,l)),g=n(Object(u.differenceInMinutes)(i,Object(u.startOfDay)(i)))-1,h=Object(f.range)(d,m+1).map(function(e){var t=e===d?b:0,a=e===m?g:c-1;return{startX:e,startY:t,endX:e,endY:a,spanX:A(e,e),spanY:A(t,a)}});return Object(u.isEqual)(i,Object(u.startOfDay)(i))&&h.pop(),h}},G=a(110),$=a.n(G);function ee(e){return $()(Object(c.a)(e).map(function(e){return e.map(function(e){return new Date(e)})}))}function te(e,t){return null===t?e:ee([].concat(Object(c.a)(e),Object(c.a)(t))).sort(function(e,t){return Object(u.compareAsc)(e[0],t[0])})}var ae=[["2019-03-03T22:45:00.000Z","2019-03-04T01:15:00.000Z"],["2019-03-05T22:00:00.000Z","2019-03-06T01:00:00.000Z"],["2019-03-04T22:15:00.000Z","2019-03-05T01:00:00.000Z"],["2019-03-07T05:30:00.000Z","2019-03-07T10:00:00.000Z"],["2019-03-08T22:00:00.000Z","2019-03-09T01:00:00.000Z"],["2019-03-09T22:00:00.000Z","2019-03-10T01:00:00.000Z"],["2019-03-06T22:00:00.000Z","2019-03-07T01:00:00.000Z"]],ne=1440,ce=1,re=function(e){return e/ce},le=function(e){return e*ce};var se=document.getElementById("root");p.a.render(g.a.createElement(function(e){var t=e.verticalPrecision,a=void 0===t?1/30:t,s=e.visualGridPrecision,d=void 0===s?1/30:s,h=Object(u.startOfWeek)(new Date("2019-03-04"),{weekStartsOn:1}),p=ne*a,v=7*ce,_=Object(m.useCallback)(function(e){return e/a},[a]),y=function(e){return e*a},Y=Object(m.useMemo)(function(){return q({originDate:h,fromY:_,fromX:re})},[_,re,h]),E=Object(m.useCallback)(function(e){var t=Y(e),a=Object(l.a)(t),n=a[0],c=a.slice(1);return b()(0===c.length,'Expected "cellInfoToSingleDateRange" to return a single date range, found '.concat(c.length," additional ranges instead. This is a bug in @remotelock/weekly-scheduler")),n},[Y]),D=Object(m.useMemo)(function(){return J({originDate:h,numVerticalCells:p,numHorizontalCells:v,toX:le,toY:y})},[y,le,p,v,h]),X=Object(m.useRef)(null),M=Object(m.useRef)(null),L=B(X,{top:!1,left:!0}),V=B(X,{top:!1,left:!1}),A=i()(M),U=function(e){var t=Object(m.useState)({top:0,left:0,width:0,height:0}),a=Object(r.a)(t,2),n=a[0],c=a[1],l=Object(m.useState)(null),s=Object(r.a)(l,2),i=s[0],o=s[1],u=Object(m.useState)(!1),d=Object(r.a)(u,2),b=d[0],g=d[1],h=Object(m.useState)(!1),p=Object(r.a)(h,2),O=p[0],j=p[1];return Object(m.useEffect)(function(){var t=e.current;if(t){var a=F(t),n=Object(x.a)(window,"touchmove",{passive:!1}),r=Object(x.a)(window,"touchend",{passive:!0}),l=Object(x.a)(t,"touchstart",{passive:!1}).pipe(Object(N.a)(function(e){return Object(T.a)(e).pipe(Object(k.a)(300),Object(H.a)(n))})),s=Object(x.a)(t,"mousedown",{passive:!0}).pipe(Object(I.a)(function(e){return 1===e.which})),i=Object(x.a)(window,"mousemove",{passive:!0}),u=Object(x.a)(window,"mouseup",{passive:!0}),d=Object(R.a)(s,l).pipe(Object(W.a)(function(e){e.preventDefault(),e.stopPropagation()}),Object(z.a)(a)),b=Object(R.a)(u,r).pipe(Object(z.a)(a),Object(W.a)(function(){g(!1),j(!0)})),m=Object(R.a)(i,n).pipe(Object(W.a)(function(e){e.preventDefault(),e.stopPropagation()}),Object(z.a)(a)),h=d.pipe(Object(W.a)(function(){g(!0),j(!1)}),Object(N.a)(function(e){return m.pipe(Object(Z.a)(e),Object(z.a)(function(a){var n=Math.max(e.x,0),c=Math.max(e.y,0),r=Math.min(a.x,t.scrollWidth),l=Math.min(a.y,t.scrollHeight),s=Math.min(c,l),i=Math.max(c,l),o=Math.min(n,r),u=Math.max(n,r);return{startX:n,startY:c,endX:r,endY:l,top:s,bottom:i,left:o,right:u,width:u-o,height:i-s}}),Object(H.a)(b))}),Object(S.a)(f.isEqual)),p=h.pipe(Object(z.a)(function(e){return{top:e.top,left:e.left,width:e.width,height:e.height}})),O=h.subscribe(o),v=p.subscribe(c);return function(){O.unsubscribe(),v.unsubscribe()}}},[]),{style:n,box:i,isDragging:b,cancel:Object(m.useCallback)(function(){g(!1),j(!1),o(null)},[o]),hasFinishedDragging:O}}(M),G=U.style,$=U.box,se=U.isDragging,ie=U.hasFinishedDragging,oe=U.cancel,ue=Object(m.useState)(null),de=Object(r.a)(ue,2),be=de[0],fe=de[1],me=Object(j.a)(ae.map(function(e){return e.map(function(e){return new Date(e)})}).sort(function(e,t){return Object(u.compareAsc)(e[0],t[0])})),ge=Object(r.a)(me,2),he=ge[0],pe=ge[1],Oe=pe.set,je=pe.undo,ve=pe.redo,_e=pe.canUndo,ye=pe.canRedo,Ye=Object(m.useMemo)(function(){var e=null,t=null;if(null!==M.current){var a=M.current;e=a.scrollHeight,t=a.scrollWidth}return{totalHeight:e,totalWidth:t}},[M.current,A]),Ee=Ye.totalHeight,De=Ye.totalWidth,Xe=Object(m.useMemo)(function(){return null===Ee||null===De?null:Q({totalHeight:Ee,totalWidth:De,numHorizontalCells:v,numVerticalCells:p})},[Ee,De,v,p]);Object(m.useEffect)(function(){if(null!==Xe&&null!==$){var e=$,t=Xe.getCellFromRect(e),a=Y(t);fe(a)}else fe(null)},[$,Xe,fe]),Object(m.useEffect)(function(){ie&&(Oe(te(he.present,be)),fe(null))},[ie,Oe,fe,be,he.present]),w("ctrl+z",function(){_e&&je()},document),w("ctrl+shift+z",function(){ye&&ve()},document),w("esc",function(){be&&oe()},document),Object(m.useEffect)(function(){oe()},[A]);var we=Object(m.useCallback)(function(e,t){if(!he.present&&e)return[e];var a=Object(c.a)(he.present);e?a[t]=e:a.splice(t,1),Oe(ee(a))},[he.present]),Me=Object(m.useMemo)(function(){return K({originDate:h,fromX:re,fromY:function(e){return e/d}})},[d,re,h]);return Object(m.useEffect)(function(){X.current&&X.current.contains(document.activeElement)&&document.activeElement&&Object(O.a)(document.activeElement,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})},[X.current,document.activeElement,he.present]),g.a.createElement("div",{ref:X,className:Object(o.a)([P.a.root,Object(n.a)({},P.a["no-scroll"],se)])},g.a.createElement("div",{style:L,className:P.a.timeline},g.a.createElement("div",{className:P.a.header},g.a.createElement("div",{className:P.a["day-column"]},g.a.createElement("div",{className:Object(o.a)([P.a.cell,P.a.title])},"T"))),g.a.createElement("div",{className:P.a.calendar},g.a.createElement("div",{className:P.a["day-column"]},g.a.createElement("div",{className:P.a["day-hours"]},Object(f.times)(48).map(function(e){var t="";if(e%2===0){var a=Me({startX:0,startY:e,endX:0,endY:e+1,spanX:1,spanY:1}),n=Object(r.a)(a,1),c=Object(r.a)(n[0],1)[0];t=Object(u.format)(c,"h a")}return g.a.createElement("div",{key:e,className:P.a.cell},g.a.createElement("div",{className:P.a.time},t))}))))),g.a.createElement("div",null,g.a.createElement("div",{style:V,className:Object(o.a)([P.a.calendar,P.a.header])},Object(f.times)(7).map(function(e){return g.a.createElement("div",{key:e,className:P.a["day-column"]},g.a.createElement("div",{className:Object(o.a)([P.a.cell,P.a.title])},Object(u.format)(Object(u.addDays)(h,e),"ddd")))})),g.a.createElement("div",{className:P.a["layer-container"]},se&&g.a.createElement("div",{className:P.a["drag-box"],style:G},ie&&g.a.createElement("div",{className:P.a.popup})),Xe&&be&&se&&g.a.createElement(C,{classes:P.a,dateRangeToCells:D,cellInfoToDateRange:E,className:P.a["is-pending-creation"],ranges:te(he.present,be),grid:Xe}),Xe&&!be&&g.a.createElement(C,{classes:P.a,dateRangeToCells:D,cellInfoToDateRange:E,isResizable:!0,isMovable:!0,isDeletable:!0,onChange:we,ranges:he.present,grid:Xe}),g.a.createElement("div",{ref:M,className:P.a.calendar},Object(f.times)(7).map(function(e){return g.a.createElement("div",{key:e,className:P.a["day-column"]},g.a.createElement("div",{className:P.a["day-hours"]},Object(f.times)(48).map(function(t){return g.a.createElement("div",{key:t,className:P.a.cell},g.a.createElement("div",{className:P.a.debug},"(",e,", ",t,")"))})))})))))},{verticalPrecision:1/30}),se)},4:function(e,t,a){e.exports={"no-scroll":"styles_no-scroll__1vsU8",root:"styles_root__3QAxj",timeline:"styles_timeline__106Mk",debug:"styles_debug__2SKKM","debug-active":"styles_debug-active___9OUc",calendar:"styles_calendar__3Xx2Y","react-draggable":"styles_react-draggable__2QRVw","handle-wrapper":"styles_handle-wrapper__2T7f7",handle:"styles_handle__1dKGL",top:"styles_top__2FFal",bottom:"styles_bottom__3nd0X","layer-container":"styles_layer-container__1Quoi",event:"styles_event__bjik1","drag-box":"styles_drag-box__OvX9t",draggable:"styles_draggable__a1ktL","button-reset":"styles_button-reset__3_zQt","is-draggable":"styles_is-draggable__2U2x2","react-draggable-dragging":"styles_react-draggable-dragging__1T3s8","is-pending-creation":"styles_is-pending-creation__2vDDI","hours-container":"styles_hours-container__3XZzL","day-column":"styles_day-column__2sQzS","day-hours":"styles_day-hours__3_7p4",cell:"styles_cell__1OJUD",time:"styles_time__1X-Hn",title:"styles_title__2dKTz",header:"styles_header__1IF59",first:"styles_first__1t63n",popup:"styles_popup__2oSt1","range-boxes":"styles_range-boxes__39XBE","event-content":"styles_event-content__1EBie",start:"styles_start__2DXVx",end:"styles_end__2XnIt"}}},[[113,1,2]]]);
//# sourceMappingURL=main.c6f42ce1.chunk.js.map